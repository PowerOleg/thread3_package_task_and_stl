пример в конце https://runebook.dev/ru/docs/cpp/thread/promise
объект **std::promise** предназначен для использования только один раз.
std::promise умеет:

1make ready: promise сохраняет результат или исключение в общем состоянии. Отмечает состояние готовности и разблокирует любой поток, ожидающий будущего, связанного с общим состоянием.
2release: promise отказывается от ссылки на общее состояние. Если это была последняя такая ссылка, общее состояние уничтожается. Если это не общее состояние, созданное std::async , которое еще не готово, эта операция не блокируется.
3abandon: promise сохраняет исключение типа std::future_error с кодом ошибки std::future_errc::broken_promise , создает общее состояниеready, а потомreleasesit.

Установка результата

1set_value
устанавливает результат в определенное значение
(публичная функция-член)
2set_value_at_thread_exit
устанавливает для результата определенное значение, доставляя уведомление только при выходе из потока
(публичная функция-член)
3set_exception
устанавливает результат, указывающий на исключение
(публичная функция-член)
4set_exception_at_thread_exit
устанавливает результат, указывающий на исключение, при доставке уведомления только при выходе из потока
(публичная функция-член)